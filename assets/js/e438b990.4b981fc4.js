"use strict";(self.webpackChunkignite_cookbook=self.webpackChunkignite_cookbook||[]).push([[1065],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>m});var o=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,o,l=function(e,t){if(null==e)return{};var n,o,l={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var p=o.createContext({}),u=function(e){var t=o.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=u(e.components);return o.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},c=o.forwardRef((function(e,t){var n=e.components,l=e.mdxType,r=e.originalType,p=e.parentName,s=a(e,["components","mdxType","originalType","parentName"]),c=u(n),m=l,k=c["".concat(p,".").concat(m)]||c[m]||d[m]||r;return n?o.createElement(k,i(i({ref:t},s),{},{components:n})):o.createElement(k,i({ref:t},s))}));function m(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=n.length,i=new Array(r);i[0]=c;var a={};for(var p in t)hasOwnProperty.call(t,p)&&(a[p]=t[p]);a.originalType=e,a.mdxType="string"==typeof e?e:l,i[1]=a;for(var u=2;u<r;u++)i[u]=n[u];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}c.displayName="MDXCreateElement"},1606:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>a,toc:()=>u});var o=n(7462),l=(n(7294),n(3905));const r={title:"Staying With Expo",description:"Setting up Ignite to build a custom Expo development client for use with Config Plugins",tags:["Expo","expo-dev-client"],last_update:{author:"Frank Calise"},publish_date:new Date("2022-10-11T00:00:00.000Z")},i="Staying With Expo",a={unversionedId:"recipes/StayingWithExpo",id:"recipes/StayingWithExpo",title:"Staying With Expo",description:"Setting up Ignite to build a custom Expo development client for use with Config Plugins",source:"@site/docs/recipes/StayingWithExpo.md",sourceDirName:"recipes",slug:"/recipes/StayingWithExpo",permalink:"/docs/recipes/StayingWithExpo",draft:!1,tags:[{label:"Expo",permalink:"/docs/tags/expo"},{label:"expo-dev-client",permalink:"/docs/tags/expo-dev-client"}],version:"current",lastUpdatedBy:"Frank Calise",lastUpdatedAt:1681977593,formattedLastUpdatedAt:"Apr 20, 2023",frontMatter:{title:"Staying With Expo",description:"Setting up Ignite to build a custom Expo development client for use with Config Plugins",tags:["Expo","expo-dev-client"],last_update:{author:"Frank Calise"},publish_date:"2022-10-11T00:00:00.000Z"},sidebar:"mainSidebar",previous:{title:"SelectField using `react-native-bottom-sheet`",permalink:"/docs/recipes/SelectFieldWithBottomSheet"},next:{title:"TypeScript baseUrl Configuration",permalink:"/docs/recipes/TypeScriptBaseURL"}},p={},u=[{value:"Appetizer",id:"appetizer",level:2},{value:"Steps",id:"steps",level:2},{value:"1. Project Setup",id:"1-project-setup",level:3},{value:"2. Build Profile",id:"2-build-profile",level:3},{value:"3. Run the Build!",id:"3-run-the-build",level:3},{value:"4. Run the Development Client",id:"4-run-the-development-client",level:3}],s={toc:u};function d(e){let{components:t,...n}=e;return(0,l.kt)("wrapper",(0,o.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"staying-with-expo"},"Staying With Expo"),(0,l.kt)("p",null,"This guide will teach you how to set up an ",(0,l.kt)("a",{parentName:"p",href:"https://docs.expo.dev/development/getting-started/"},"Expo development build")," which prepares your project for native code via ",(0,l.kt)("a",{parentName:"p",href:"https://docs.expo.dev/guides/config-plugins/"},"Config Plugins"),", but keeps you in Expo's managed workflow."),(0,l.kt)("h2",{id:"appetizer"},"Appetizer"),(0,l.kt)("p",null,"Follow the ",(0,l.kt)("a",{parentName:"p",href:"/docs/recipes/PristineExpoProject"},"Pristine Expo Project")," recipe first to make sure you're starting with an Expo only project."),(0,l.kt)("p",null,"You'll also need ",(0,l.kt)("inlineCode",{parentName:"p"},"eas-cli")," globally installed and and an ",(0,l.kt)("a",{parentName:"p",href:"https://expo.dev/signup"},"Expo account")," if you don't already have one."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-console"},"npm install -g eas-cli\n")),(0,l.kt)("p",null,(0,l.kt)("em",{parentName:"p"},"Optional"),": You can use EAS builds for free, however there is a queue time to wait for your build. It is possible to ",(0,l.kt)("a",{parentName:"p",href:"https://docs.expo.dev/build-reference/local-builds/"},"build locally"),", however you'll need a couple of other dependencies installed for proper iOS and Android builds (if you can already build iOS/Android natively, you're probably good to go!)"),(0,l.kt)("details",null,(0,l.kt)("summary",null,(0,l.kt)("strong",null,"iOS")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-console"},"brew install cocoapods fastlane\n"))),(0,l.kt)("details",null,(0,l.kt)("summary",null,(0,l.kt)("strong",null,"Android")),(0,l.kt)("p",null,"SDK and NDK")),(0,l.kt)("h2",{id:"steps"},"Steps"),(0,l.kt)("h3",{id:"1-project-setup"},"1. Project Setup"),(0,l.kt)("p",null,"From within your project directory, run the following:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-console"},"yarn add expo-dev-client\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-console"},"eas build:configure\n")),(0,l.kt)("h3",{id:"2-build-profile"},"2. Build Profile"),(0,l.kt)("p",null,"Modify the newly generated ",(0,l.kt)("inlineCode",{parentName:"p"},"eas.json")," to configure a ",(0,l.kt)("inlineCode",{parentName:"p"},"preview")," build profile"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "cli": {\n    "version": ">= 0.60.0"\n  },\n  "build": {\n    "development": {\n      "developmentClient": true,\n      "distribution": "internal"\n    },\n    "preview": {\n      "developmentClient": true,\n      "ios": {\n        "simulator": true\n      }\n    },\n    "production": {}\n  },\n  "submit": {\n    "production": {}\n  }\n}\n')),(0,l.kt)("h3",{id:"3-run-the-build"},"3. Run the Build!"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Using EAS build servers")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-console"},"eas build --profile preview\n")),(0,l.kt)("p",null,"Once complete, you can download the Android ",(0,l.kt)("inlineCode",{parentName:"p"},"apk")," or iOS ",(0,l.kt)("inlineCode",{parentName:"p"},"tar")," file."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Build Locally")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-console"},"eas build --profile preview --local\n")),(0,l.kt)("p",null,"Your app will be saved in the root directory unless you specify the desired directory with the environment variable ",(0,l.kt)("inlineCode",{parentName:"p"},"EAS_LOCAL_BUILD_ARTIFACTS_DIR"),", for example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-console"},"EAS_LOCAL_BUILD_ARTIFACTS_DIR=build eas build --profile preview --local\n")),(0,l.kt)("p",null,"This will save your ",(0,l.kt)("inlineCode",{parentName:"p"},"*.apk")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"*.tar.gz")," (containing the ",(0,l.kt)("inlineCode",{parentName:"p"},".app"),") in the ",(0,l.kt)("inlineCode",{parentName:"p"},"[project-dir]/build/")," directory."),(0,l.kt)("h3",{id:"4-run-the-development-client"},"4. Run the Development Client"),(0,l.kt)("p",null,"With the builds complete, let's add them to your emulator or simulator."),(0,l.kt)("details",null,(0,l.kt)("summary",null,(0,l.kt)("strong",null,"iOS")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"tar zxvf build/build-*.tar.gz -C build/")," (adapt this command depending on where you saved it to)"),(0,l.kt)("li",{parentName:"ul"},"Drag the ",(0,l.kt)("inlineCode",{parentName:"li"},"PizzaApp.app")," onto your iOS simulator"))),(0,l.kt)("details",null,(0,l.kt)("summary",null,(0,l.kt)("strong",null,"Android")),(0,l.kt)("p",null,'Drag the APK onto your emulator or install it on a device (making sure your settings are appropriate for "Install unknown apps")')),(0,l.kt)("p",null,"You can now develop locally like you normally would with Expo Go, with one last adjustment to the ",(0,l.kt)("inlineCode",{parentName:"p"},"start")," script."),(0,l.kt)("p",null,"In ",(0,l.kt)("inlineCode",{parentName:"p"},"package.json")," modify the start script to use the ",(0,l.kt)("inlineCode",{parentName:"p"},"expo-dev-client")," package."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-diff"},'--"start": "expo start"\n++"start": "expo start --dev-client"\n')),(0,l.kt)("p",null,"Run ",(0,l.kt)("inlineCode",{parentName:"p"},"yarn start")," in your terminal so metro starts up. Follow the Expo CLI to boot up either the Android or iOS app. You'll notice Expo Go has not launched in this case, but something that looks very similar (you can still shake the device for developer menu, etc)."))}d.isMDXComponent=!0}}]);