"use strict";(self.webpackChunkignite_cookbook=self.webpackChunkignite_cookbook||[]).push([[597],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>g});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=o.createContext({}),l=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=l(e.components);return o.createElement(c.Provider,{value:t},e.children)},f={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=l(n),g=a,S=u["".concat(c,".").concat(g)]||u[g]||f[g]||r;return n?o.createElement(S,i(i({ref:t},p),{},{components:n})):o.createElement(S,i({ref:t},p))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=u;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var l=2;l<r;l++)i[l]=n[l];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},3602:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>f,frontMatter:()=>r,metadata:()=>s,toc:()=>l});var o=n(7462),a=(n(7294),n(3905));const r={title:"Accessiblity Font Sizes",description:"Dealing With Accessibility Font Sizes in React Native",tags:["Accessibility"],last_update:{author:"Mark Rickert"}},i="Dealing With Accessibility Font Sizes in React Native",s={unversionedId:"FontSizes",id:"FontSizes",title:"Accessiblity Font Sizes",description:"Dealing With Accessibility Font Sizes in React Native",source:"@site/docs/FontSizes.md",sourceDirName:".",slug:"/FontSizes",permalink:"/ignite-cookbook/docs/FontSizes",draft:!1,tags:[{label:"Accessibility",permalink:"/ignite-cookbook/docs/tags/accessibility"}],version:"current",lastUpdatedBy:"Mark Rickert",lastUpdatedAt:1661801065,formattedLastUpdatedAt:"Aug 29, 2022",frontMatter:{title:"Accessiblity Font Sizes",description:"Dealing With Accessibility Font Sizes in React Native",tags:["Accessibility"],last_update:{author:"Mark Rickert"}},sidebar:"tutorialSidebar",previous:{title:"Detox Intro",permalink:"/ignite-cookbook/docs/DetoxIntro"},next:{title:"Add component tests to component generator",permalink:"/ignite-cookbook/docs/GeneratorComponentTests"}},c={},l=[],p={toc:l};function f(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"dealing-with-accessibility-font-sizes-in-react-native"},"Dealing With Accessibility Font Sizes in React Native"),(0,a.kt)("p",null,"Modern phones have a lot of accessibility options. Users can make the font size on Android GIGANTIC. This is a way I devised, specifically for the GasBuddy project to allow users to scale their fonts larger and smaller, but only to a certain point. We wanted the accessibility but not the extreme ends of it, just to keep things readable without turning off font scaling altogether."),(0,a.kt)("p",null,"You'll have to modify this for your own needs but this should get you most of the way there. Having a shared common Text component that you use will help a lot instead of using Text imported from react-native in your components. Less places to use these hooks."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},'import * as React from "react";\nimport { View, TextProps, PixelRatio, AppState } from "react-native";\nimport { MaterialTopTabNavigationOptions } from "@react-navigation/material-top-tabs";\nimport { StackNavigationOptions } from "@react-navigation/stack";\nimport { BottomTabNavigationOptions } from "@react-navigation/bottom-tabs";\nimport { DrawerNavigationOptions } from "@react-navigation/drawer";\nimport { useStores } from "@pizzaapp/state";\nimport { useThemeProperties } from "@pizzaapp/shared-assets";\nimport { Text } from "./Text";\n\n// These constants determine mow much bigger the font size should get based on the user\'s\n// accessibility settings. Even if they turn the dial all the way to 11, we will only ever\n// scale the fonts by these factors. This is to prevent the font size from getting too large\n// and completely breaking the layout.\nconst MAX_FONT_SCALE = 1.2;\nconst MIN_FONT_SCALE = 0.8;\n\n// Returns fontScaling props for Text and TextInput components\n// Usage:\n// const fontProps = useFontScaling();\n// return <Text {...fontProps}>Text Here</Text>;\nexport const useFontScaling = (): Partial<TextProps> => {\n  const { preferenceStore } = useStores();\n\n  const fontScaling: Partial<TextProps> = React.useMemo(() => {\n    const afs = preferenceStore?.allowFontScaling || false;\n    return {\n      minimumFontScale: afs ? MIN_FONT_SCALE : 1, // This prevents the font from getting too small.\n      maxFontSizeMultiplier: afs ? MAX_FONT_SCALE : 1, // This prevents the font from getting too big.\n      allowFontScaling: afs, // This allows the font to be scaled.\n    };\n  }, [preferenceStore?.allowFontScaling]);\n\n  return fontScaling;\n};\n\n// Returns fontScaling props for Navigator components\nexport const useNavigatorFontScalingScreenOptions =\n  (): Partial<StackNavigationOptions> => {\n    const { preferenceStore } = useStores();\n\n    const fontScaling: Partial<StackNavigationOptions> = React.useMemo(() => {\n      const afs = preferenceStore?.allowFontScaling || false;\n      return {\n        headerBackAllowFontScaling: afs,\n        headerTitleAllowFontScaling: afs,\n      };\n    }, [preferenceStore?.allowFontScaling]);\n\n    return fontScaling;\n  };\n\n// Returns fontScaling props for Top Tab Navigator components\nexport const useTopTabNavigatorFontScalingScreenOptions =\n  (): Partial<MaterialTopTabNavigationOptions> => {\n    const { preferenceStore } = useStores();\n\n    const fontScaling: Partial<MaterialTopTabNavigationOptions> =\n      React.useMemo(() => {\n        const afs = preferenceStore?.allowFontScaling || false;\n        return {\n          tabBarAllowFontScaling: afs,\n        };\n      }, [preferenceStore?.allowFontScaling]);\n\n    return fontScaling;\n  };\n\n// Returns fontScaling props for Tab Navigator components\nexport const useTabNavigatorFontScalingScreenOptions =\n  (): Partial<BottomTabNavigationOptions> => {\n    const { preferenceStore } = useStores();\n\n    const fontScaling: Partial<BottomTabNavigationOptions> =\n      React.useMemo(() => {\n        const afs = preferenceStore?.allowFontScaling || false;\n        return {\n          tabBarAllowFontScaling: afs,\n          headerTitleAllowFontScaling: afs,\n        };\n      }, [preferenceStore?.allowFontScaling]);\n\n    return fontScaling;\n  };\n\n// Returns fontScaling props for Tab Navigator components\nexport const useDrawerNavigatorFontScalingScreenOptions =\n  (): Partial<DrawerNavigationOptions> => {\n    const { preferenceStore } = useStores();\n\n    const fontScaling: Partial<DrawerNavigationOptions> = React.useMemo(() => {\n      const afs = preferenceStore?.allowFontScaling || false;\n      return {\n        drawerAllowFontScaling: afs,\n        headerTitleAllowFontScaling: afs,\n      };\n    }, [preferenceStore?.allowFontScaling]);\n\n    return fontScaling;\n  };\n\n// Use this handy __DEV__ mode only component to figure out what the font size is actually doing.\nexport const DevFontSize = () => {\n  const theme = useThemeProperties();\n  const { preferenceStore } = useStores();\n  const [appStateVisible, setAppStateVisible] = React.useState(\n    AppState.currentState\n  );\n\n  React.useEffect(() => {\n    const subscription = AppState.addEventListener("change", (nextAppState) => {\n      setAppStateVisible(nextAppState);\n    });\n\n    return () => subscription.remove();\n  }, []);\n\n  // This memo has to listen to appStateVisible even though it\'s not a direct dependency\n  // so that we can reload the font size when the app switches back from user settings.\n  const fontSize = React.useMemo(() => {\n    if (preferenceStore?.allowFontScaling || false) {\n      return Math.min(\n        Math.max(PixelRatio.getFontScale(), MIN_FONT_SCALE),\n        MAX_FONT_SCALE\n      );\n    } else {\n      return 1.0;\n    }\n  }, [preferenceStore?.allowFontScaling, appStateVisible]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const devStyle = React.useMemo(\n    () => ({\n      backgroundColor: theme.disabledSecondaryButton,\n      padding: 10,\n      margin: 10,\n      borderRadius: 5,\n      borderColor: theme.primaryText,\n      borderWidth: 1,\n    }),\n    [theme]\n  );\n  return __DEV__ ? (\n    <View style={devStyle}>\n      <Text>\n        User Font Setting: {Math.trunc(PixelRatio.getFontScale() * 100) / 100}\n      </Text>\n      <Text>\n        Currently limiting ratio to: {Math.trunc(fontSize * 100) / 100}\n      </Text>\n    </View>\n  ) : null;\n};\n')))}f.isMDXComponent=!0}}]);